<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Sorteo Glogloking</title>
<style>
body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: Arial, sans-serif;
    background: linear-gradient(
        120deg,
        #ff004c,
        #4500ff,
        #00eaff,
        #00ff37,
        #ffea00,
        #ff004c
    );
    background-size: 1800% 1800%;
    animation: fondoRGB 18s ease-in-out infinite;
}

@keyframes fondoRGB {
    0%   { background-position: 0% 50%; }
    20%  { background-position: 50% 80%; }
    40%  { background-position: 100% 50%; }
    60%  { background-position: 50% 20%; }
    80%  { background-position: 0% 50%; }
    100% { background-position: 0% 50%; }
}

#pavazo {
    position: fixed;
    width: 420px;
    pointer-events: none;
    top: 100px;
    left: 100px;
    filter: drop-shadow(0 0 12px rgba(255,255,255,0.6));
    z-index: -1;
}

h1 {
    text-align: center;
    font-size: 64px;
    color: white;
    margin-top: -10px;
    text-shadow: 4px 4px 10px black;
    animation: titlePulse 2s infinite;
}

@keyframes titlePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.07); }
    100% { transform: scale(1); }
}

#container {
    width: 540px;
    margin: 0 auto;
    margin-top: 20px;
    text-align: center;
    background: rgba(0,0,0,0.4);
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 0 20px black;
}

#participantes {
    width: 90%;
    height: 140px;
    border-radius: 10px;
    padding: 10px;
    font-size: 16px;
    text-align: center;
}

button {
    margin-top: 5px;
    padding: 12px 25px;
    font-size: 20px;
    cursor: pointer;
    border: 3px solid transparent;
    border-radius: 12px;
    background: 
        linear-gradient(to bottom, #002988, #0171F4, #002988), /* fondo azul */
        linear-gradient(135deg, #ffffff 0%, #b9b9b9 25%, #7a7a7a 50%, #b9b9b9 75%, #ffffff 100%); /* borde met√°lico */
    background-origin: border-box;
    background-clip: padding-box, border-box;
    transition: 0.5s;
    color: white;
}



button:hover {
    transform: scale(1.05);
    background:
        linear-gradient(to bottom, #0034aa, #2090ff, #0034aa),
        linear-gradient(135deg, #ffffff 0%, #e3e3e3 20%, #aaaaaa 50%, #e3e3e3 80%, #ffffff 100%);
}


/* GANADOR M√ÅS GRANDE Y LLAMATIVO */
#resultado {
    margin-top: 20px;
    font-size: 30px; /* antes 36px */
    color: #2090ff;
    font-weight: bold;
    padding: 20px;
    border-radius: 20px;
    text-shadow: 4px 4px 12px black;
    background: rgba(0,0,0,0.6);
    border: 4px solid white;
    animation: ganadorPulse 1s infinite alternate;
}

@keyframes ganadorPulse {
    0% { transform: scale(1); box-shadow: 0 0 20px red; }
    50% { transform: scale(1.1); box-shadow: 0 0 25px lime; }
    100% { transform: scale(1); box-shadow: 0 0 20px blue; }
}

.pavo {
    position: fixed;
    top: -120px;
    width: 80px;
    user-select: none;
    pointer-events: none;
    animation: caer 4s linear infinite;
    z-index: -1;
}

@keyframes caer {
    0% { transform: translateY(-150px) rotate(0deg); }
    100% { transform: translateY(110vh) rotate(360deg); }
}

#header {
    width: 100%;
    text-align: center;
    margin-top: 10px;  
}

.venom {
    width: 520px;
    display: block;
    margin: 0 auto;
    filter: drop-shadow(0 0 10px black);
    pointer-events: none;
}

#contadorParticipantes {
    font-size: 24px;
    color: white;
    font-weight: bold;
    text-align: center;
    margin-top: 10px;
    background-color: rgba(0, 0, 0, 0.6);
    border-radius: 12px;
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.5);
}

/* /// NUEVO - CAJA DE GANADORES */
#listaGanadores {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 260px;
    background: rgba(0,0,0,0.55);
    padding: 15px;
    border-radius: 15px;
    color: white;
    font-size: 20px;
    box-shadow: 0 0 20px black;
    max-height: 80vh;
    overflow-y: auto;
}
#listaGanadores h2 {
    font-size: 26px;
    margin: 0 0 10px 0;
    text-align: center;
    color: white;
    text-shadow: 0 0 10px black;
}
#listaGanadores ul {
    padding-left: 20px;
}
#listaGanadores li {
    margin-bottom: 5px;
}

/* <<< NUEVO ‚Äî ganador destacado >>> */
.ganadorDestacado {
    color: #ffffff;
    font-weight: bold;
    text-shadow: 0 0 10px #ffdd55, 0 0 20px #ffaa00;
    animation: glowWinner 1.5s infinite alternate;
}

@keyframes glowWinner {
    0% { transform: scale(1); opacity: 0.8; }
    100% { transform: scale(1.05); opacity: 1; }
}
.tituloGanador {
    color: #ffffff;      /* amarillo brillante */
    font-weight: bold;
    text-shadow: 0 0 10px black, 0 0 20px #2303b4;
}

/* PANEL DE SONIDOS (NO CAMBIA NADA DEL DISE√ëO EXISTENTE) */
#panelSonidos {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 260px;
    background: rgba(0,0,0,0.55);
    padding: 15px;
    border-radius: 15px;
    color: white;
    font-size: 18px;
    box-shadow: 0 0 20px black;
    max-height: 80vh;
    overflow-y: auto;
}

#panelSonidos h2 {
    text-align: center;
    margin: 0 0 10px 0;
}

.sonidoBox {
    background: rgba(255,255,255,0.1);
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
}
.sonidoBox button {
    padding: 6px 12px;
    font-size: 15px;
    cursor: pointer;
    border-radius: 8px;
    background: #0171F4;
    color: white;
    border: none;
}


</style>
</head>

<body>

<!-- /// NUEVO: cuadro de ganadores -->
<div id="listaGanadores">
    <h2>Ganadores</h2>
    <ul id="ganadoresList"></ul>
</div>

<audio id="musicaFondo" loop>
  <source src="pavomusic.mp3" type="audio/mpeg">
</audio>

<div id="container">
    <img id="pavazo" src="pavoking.png">

    <div id="header">
        <img src="glogloking.png" style="width: 320px; position:relative; top: 40px;">
        <img src="pavazo.png" class="venom">
    </div>

    <textarea id="participantes" placeholder="Escribe un nombre por l√≠nea..."></textarea>

    <div id="contadorParticipantes">
        <span id="totalParticipantes">0</span> participantes
    </div>

    <br>

    <button onclick="mezclarLista()">üîÑ Mezclar lista</button>
    <br>
    <button onclick="iniciarSorteo()">üéâ ¬°SORTEAR!</button>

    <div id="resultado"></div>
</div>
<!-- PANEL DE SONIDOS -->
<div id="panelSonidos">
    <h2>üéµ Musica</h2>

    <div class="sonidoBox">
        <div>üì¢ Pavito</div>
        <button onclick="toggleSound('s1')">Play/Pause</button><br>
        <input type="range" min="0" max="1" step="0.01" onchange="setVol('s1', this.value)">
    </div>

    <!--<div class="sonidoBox">
        <div>üî• Victoria</div>
        <button onclick="toggleSound('s2')">Play/Pause</button><br>
        <input type="range" min="0" max="1" step="0.01" onchange="setVol('s2', this.value)">
    </div>

    <div class="sonidoBox">
       <iframe id="playerYT" width="350" height="200" frameborder="0" allowfullscreen></iframe>

    </div> -->
</div>

<!-- AUDIOS -->
<audio id="s1" src="pavomusic.mp3"></audio>
<audio id="s2" src="victoria.mp3"></audio>
<audio id="s3" src="boom.mp3"></audio>


<script>

    // VOLUMENES INICIALES
window.addEventListener("DOMContentLoaded", () => {
    document.getElementById("s1").volume = 0.01; // pavito
    document.getElementById("s2").volume = 0.06; // Victoria
    document.getElementById("s3").volume = 0.04; // Explosi√≥n
});

    /* CONTROL DE SONIDOS */
function toggleSound(id) {
    let s = document.getElementById(id);
    if (s.paused) s.play();
    else s.pause();
}

function setVol(id, v) {
    document.getElementById(id).volume = v;
}

const musicaFondo = document.getElementById("musicaFondo");
musicaFondo.volume = 0.005;

// Contador de ganadores
let ganadores = [];

function agregarGanador(nombre) {
    ganadores.push(nombre);
    const lista = document.getElementById("ganadoresList");

    lista.innerHTML = ganadores
        .map((g, i) => {
            let clase = (i === ganadores.length - 1) ? "ganadorDestacado" : "";
            return `<li class="${clase}">${i+1}. ${g}</li>`;
        })
        .join("");
}



// Lluvia de pavos
setInterval(() => {
    const pavo = document.createElement("img");
    pavo.src = "pavo.gif";
    pavo.classList.add("pavo");

    let x = Math.random() * window.innerWidth;
    let dur = 3 + Math.random() * 3;

    pavo.style.left = x + "px";
    pavo.style.animationDuration = dur + "s";
    document.body.appendChild(pavo);

    setTimeout(() => pavo.remove(), dur * 1000);
}, 300);

// Mezclar lista
function mezclarLista() {
    let textarea = document.getElementById("participantes");
    let lista = textarea.value.trim().split(/\n+/);

    if (lista.length < 2) return;

    for (let i = lista.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [lista[i], lista[j]] = [lista[j], lista[i]];
    }

    textarea.value = lista.join("\n");
    actualizarContador(lista);
}

function actualizarContador(lista) {
    let totalParticipantes = lista.filter(n => n.trim() !== "").length;
    document.getElementById("totalParticipantes").textContent = totalParticipantes;
}

// Sorteo
function iniciarSorteo() {
    musicaFondo.pause();

    let lista = document.getElementById("participantes").value.trim().split(/\n+/);
    const resultadoDiv = document.getElementById("resultado");

    if (lista.length === 0) {
        resultadoDiv.textContent = "No hay participantes";
        return;
    }

    const audioClick = new Audio('ruleta.mp3');
    audioClick.volume = 0.1;
    audioClick.play();

    let intervalo = 100;
    let duracion = 8000;
    let vueltas = duracion / intervalo;
    let i = 0;

    const interval = setInterval(() => {
        resultadoDiv.textContent = lista[i % lista.length];
        i++;

        if (i > vueltas) {
            clearInterval(interval);

            const ganador = lista[Math.floor(Math.random() * lista.length)];

            resultadoDiv.innerHTML = `<span class="tituloGanador">GANADOR:</span> ${ganador}`;


            agregarGanador(ganador); // <-- A√ëADIR A LA LISTA DE GANADORES

            const index = lista.indexOf(ganador);
            if (index !== -1) lista.splice(index, 1);

            document.getElementById("participantes").value = lista.join("\n");
            actualizarContador(lista);
        }
    }, intervalo);

    musicaFondo.play();
}

// PAVAZO REBOTANDO
let pavazo = document.getElementById("pavazo");
let x = 120, y = 120, velX = 2, velY = 2;

function animarPavazo() {
    const ancho = window.innerWidth - pavazo.clientWidth;
    const alto = window.innerHeight - pavazo.clientHeight;

    x += velX;
    y += velY;

    if (x <= 0 || x >= ancho) velX *= -1;
    if (y <= 0 || y >= alto) velY *= -1;

    pavazo.style.left = x + "px";
    pavazo.style.top = y + "px";

    requestAnimationFrame(animarPavazo);
}

animarPavazo();
</script>

</body>
</html>
